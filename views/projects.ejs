<%- include('partials/header') %>

<section class="max-w-7xl mx-auto py-12 px-4 sm:px-6 lg:px-8">
    <h2 class="text-4xl md:text-6xl text-center mb-16 text-gold">PROJECT ARCHIVE</h2>
    
    <div class="flex flex-col gap-16">

        <!-- SECTION 1: COLOR CONTAGION (Prominent / Top) -->
        <div class="glass-card rounded-xl overflow-hidden shadow-2xl border border-gray-700">
            <div class="flex flex-col lg:flex-row">
                <!-- Game Iframe Container -->
                <div class="w-full lg:w-2/3 h-[500px] bg-gray-900 relative">
                    <!-- Fallback Image (Visible while loading) -->
                    <img 
                        id="game-fallback"
                        src="/images/FALLBACK_IMG.jpg" 
                        alt="Loading Game..." 
                        class="absolute inset-0 w-full h-full object-cover z-10 transition-opacity duration-1000"
                    >
                    
                    <iframe 
                        src="https://mobile-game-853337900822.us-central1.run.app/" 
                        class="absolute inset-0 w-full h-full z-0"
                        title="Color Contagion Game"
                        frameborder="0"
                        allowfullscreen
                        onload="document.getElementById('game-fallback').classList.add('opacity-0', 'pointer-events-none')">
                    </iframe>
                </div>
                
                <!-- Game Bio Section -->
                <div class="w-full lg:w-1/3 p-8 flex flex-col justify-center bg-gray-800/50">
                    <h3 class="text-3xl font-bold text-[#D4AF37] mb-4 font-serif">COLOR CONTAGION</h3>
                    <p class="text-[#20B2AA] mb-4 text-sm tracking-wider uppercase">Browser-Based Tactical Simulation</p>
                    
                    <div class="text-gray-300 leading-relaxed mb-8">
                        <!-- UPDATE BIO HERE -->
                        <p>
                            [Bio section for Color Contagion. Please add your description here regarding the game mechanics, the concept of spreading color, and the HTML5 Canvas technology used.]
                        </p>
                    </div>

                    <a href="https://mobile-game-853337900822.us-central1.run.app/" target="_blank" class="inline-block bg-[#D4AF37] text-black px-6 py-3 rounded font-bold hover:bg-white transition-colors text-center">
                        Play Full Screen &rarr;
                    </a>
                </div>
            </div>
        </div>

        <!-- SECTION 2: MASHUP ALBUM TRILOGY (Bouncing Image) -->
        <div class="glass-card rounded-xl overflow-hidden border border-gray-700">
            <div class="grid grid-cols-1 md:grid-cols-2">
                <!-- Bouncing Image Container -->
                <div id="mashup-container" class="relative h-96 bg-black overflow-hidden border-b md:border-b-0 md:border-r border-gray-700">
                    <img 
                        id="bouncing-mashup" 
                        src="/images/mashup.png" 
                        alt="Mashup Trilogy" 
                        class="absolute w-32 h-32 rounded-full object-cover shadow-2xl border-2 border-[#D4AF37] z-10"
                        style="will-change: transform;"
                    >
                    <!-- Optional: Subtle grid background for the container -->
                    <div class="absolute inset-0 opacity-20" style="background-image: radial-gradient(#333 1px, transparent 1px); background-size: 20px 20px;"></div>
                </div>

                <!-- Album Bio -->
                <div class="p-8 flex flex-col justify-center">
                    <h3 class="text-2xl font-bold text-[#D4AF37] mb-2 font-serif">MASHUP TRILOGY</h3>
                    <p class="text-gray-400 mb-6 text-sm">Cavalcade of Disparity (CD) | New Game | The Last Testament</p>
                    
                    <div class="text-gray-300 leading-relaxed mb-6">
                        <!-- UPDATE BIO HERE -->
                        <p>
                           [Bio section for the Mashup Trilogy. Add details here about the musical concepts, the progression between the three albums, and the inspiration behind the series.]
                        </p>
                    </div>
                </div>
            </div>
        </div>

        <!-- SECTION 3: AI ALBUM (Single Image Link) -->
        <div class="glass-card rounded-xl overflow-hidden border border-gray-700">
            <div class="grid grid-cols-1 md:grid-cols-2">
                <!-- Text on Left -->
                <div class="p-8 flex flex-col justify-center order-2 md:order-1">
                    <h3 class="text-2xl font-bold text-[#D4AF37] mb-2 font-serif uppercase leading-tight">
                        Lyrics by humans,<br>generations by AI,<br>curated by humans
                    </h3>
                    <p class="text-gray-400 mb-6 text-sm mt-2">LATEST AI ALBUM</p>
                    
                    <div class="text-gray-300 leading-relaxed mb-6">
                         <!-- UPDATE BIO HERE -->
                        <p>
                           [Bio section for the AI Album. Describe the collaboration between human creativity and generative AI in this project.]
                        </p>
                    </div>

                    <a href="https://www.youtube.com/playlist?list=PLtcPmGq9to5gLNaGPGIUT_VOkvPCA3UPA" target="_blank" class="inline-flex items-center gap-2 text-[#20B2AA] hover:text-white uppercase text-sm font-bold tracking-wider w-fit">
                        Listen on YouTube &rarr;
                    </a>
                </div>

                <!-- Playlist Image Link (Right) -->
                <a href="https://www.youtube.com/playlist?list=PLtcPmGq9to5gLNaGPGIUT_VOkvPCA3UPA" target="_blank" class="relative h-96 bg-black block group overflow-hidden order-1 md:order-2">
                    <!-- Placeholder: Replace '/images/ai-playlist-thumb.jpg' with your actual file -->
                    <img src="/images/ai-playlist-thumb.jpg" alt="AI Album Playlist" class="absolute inset-0 w-full h-full object-cover transition-transform duration-700 group-hover:scale-105 opacity-80 group-hover:opacity-100">
                    
                    <!-- Play Overlay -->
                    <div class="absolute inset-0 flex items-center justify-center bg-black/30 group-hover:bg-black/10 transition-colors">
                        <i class="fab fa-youtube text-6xl text-white drop-shadow-lg group-hover:text-[#FF0000] transition-colors"></i>
                    </div>
                </a>
            </div>
        </div>

    </div>
</section>

<!-- Script for Bouncing Image -->
<script>
    document.addEventListener('DOMContentLoaded', () => {
        const container = document.getElementById('mashup-container');
        const ball = document.getElementById('bouncing-mashup');

        if (container && ball) {
            let x = 0;
            let y = 0;
            let dx = 1.5; // Horizontal speed (slow)
            let dy = 1.5; // Vertical speed (slow)
            let animationId;

            // Start in the middle
            function initPosition() {
                const containerRect = container.getBoundingClientRect();
                const ballRect = ball.getBoundingClientRect();
                x = (containerRect.width - ballRect.width) / 2;
                y = (containerRect.height - ballRect.height) / 2;
            }

            function animate() {
                const containerRect = container.getBoundingClientRect();
                const ballRect = ball.getBoundingClientRect();

                // Update Position
                x += dx;
                y += dy;

                // Check Horizontal Boundaries
                if (x + ballRect.width >= containerRect.width) {
                    x = containerRect.width - ballRect.width; // Clamp
                    dx = -dx;
                } else if (x <= 0) {
                    x = 0; // Clamp
                    dx = -dx;
                }

                // Check Vertical Boundaries
                if (y + ballRect.height >= containerRect.height) {
                    y = containerRect.height - ballRect.height; // Clamp
                    dy = -dy;
                } else if (y <= 0) {
                    y = 0; // Clamp
                    dy = -dy;
                }

                // Apply transform
                ball.style.transform = `translate(${x}px, ${y}px)`;

                animationId = requestAnimationFrame(animate);
            }

            // Initialize and start
            // Wait for image to load to get correct dimensions, or just start if cached
            if (ball.complete) {
                initPosition();
                animate();
            } else {
                ball.onload = () => {
                    initPosition();
                    animate();
                };
            }

            // Handle Resize
            window.addEventListener('resize', () => {
                // Optional: Reset to center on resize to prevent getting stuck
                initPosition();
            });
        }
    });
</script>

<%- include('partials/footer') %>