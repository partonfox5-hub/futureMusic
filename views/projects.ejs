<%- include('partials/header') %>

<section class="max-w-7xl mx-auto py-12 px-4 sm:px-6 lg:px-8">
    <h2 class="text-4xl md:text-6xl text-center mb-16 text-gold">PROJECT ARCHIVE</h2>
    
    <div class="flex flex-col gap-16">

        <!-- SECTION 1: COLOR CONTAGION (Prominent / Top) -->
        <div class="glass-card rounded-xl overflow-hidden shadow-2xl border border-gray-700">
            <div class="flex flex-col lg:flex-row">
                <!-- Game Iframe Container -->
                <div class="w-full lg:w-2/3 h-[500px] bg-gray-900 relative">
                    <!-- Fallback Image (Visible while loading) -->
                    <img 
                        id="game-fallback"
                        src="/images/FALLBACK_IMG.png" 
                        alt="Loading Game..." 
                        class="absolute inset-0 w-full h-full object-cover z-10 transition-opacity duration-1000"
                    >
                    
                    <iframe 
                        src="https://mobile-game-853337900822.us-central1.run.app/" 
                        class="absolute inset-0 w-full h-full z-0"
                        title="Color Contagion Game"
                        frameborder="0"
                        allowfullscreen
                        onload="document.getElementById('game-fallback').classList.add('opacity-0', 'pointer-events-none')">
                    </iframe>
                </div>
                
                <!-- Game Bio Section -->
                <div class="w-full lg:w-1/3 p-8 flex flex-col justify-center bg-gray-800/50">
                    <h3 class="text-3xl font-bold text-[#D4AF37] mb-4 font-serif">COLOR CONTAGION</h3>
                    <p class="text-[#20B2AA] mb-4 text-sm tracking-wider uppercase">Browser-Based Tactical Simulation</p>
                    
                    <div class="text-gray-300 leading-relaxed mb-8">
                        <!-- UPDATE BIO HERE -->
                        <p>
                            Colorization is a simple and relaxing game that gives the player a sense of progress as they upgrade different regions of their character's brain in order to create inventions, engage in dialogue, and colorize a black and white world infested by zombie-esque tribes, who can be converted and led to help you on your mission to reinvigorate the game world.
                        </p>
                    </div>

                    <a href="https://mobile-game-853337900822.us-central1.run.app/" target="_blank" class="inline-block bg-[#D4AF37] text-black px-6 py-3 rounded font-bold hover:bg-white transition-colors text-center">
                        Play Full Screen &rarr;
                    </a>
                </div>


            </div>
        </div>



 <!-- SECTION 1.5: DOMAIN -->
        <div class="glass-card rounded-xl overflow-hidden shadow-2xl border border-gray-700">
            <div class="flex flex-col lg:flex-row">
                <!-- Domain Banner Image (Link to Project) -->
                <a href="/domain" class="w-full lg:w-2/3 h-[500px] relative group overflow-hidden bg-gray-900 block">
                    <img 
                        src="/images/domain3.png" 
                        alt="Domain Project" 
                        class="absolute inset-0 w-full h-full object-cover transition-transform duration-700 group-hover:scale-105 opacity-90 group-hover:opacity-100"
                    >
                    <!-- Overlay hint -->
                    <div class="absolute inset-0 bg-black/20 group-hover:bg-transparent transition-colors duration-300 flex items-center justify-center">
                        <span class="opacity-0 group-hover:opacity-100 text-white font-serif italic text-2xl drop-shadow-lg transition-opacity duration-300 bg-black/50 px-4 py-2 rounded">View Project</span>
                    </div>
                </a>
                
                <!-- Domain Bio Section -->
                <div class="w-full lg:w-1/3 p-8 flex flex-col justify-center bg-gray-800/50">
                    <h3 class="text-3xl font-bold text-[#D4AF37] mb-4 font-serif">DOMAIN</h3>
                    <p class="text-[#20B2AA] mb-4 text-sm tracking-wider uppercase">Chess meets dueling monsters with a civilized twist</p>
                    
                    <div class="text-gray-300 leading-relaxed mb-8">
                        <p>
                            Domain is a strategy game where you manage ethereal resource pools to overwhelm your opponent with classic abillities and civ construction.
                        </p>
                    </div>

                    <a href="/domain" class="inline-block bg-[#D4AF37] text-black px-6 py-3 rounded font-bold hover:bg-white transition-colors text-center">
                        Explore Domain &rarr;
                    </a>
                </div>
            </div>
        </div>




        <!-- SECTION 2: MASHUP ALBUM TRILOGY (Bouncing Image) -->
        <div class="glass-card rounded-xl overflow-hidden border border-gray-700">
            <div class="grid grid-cols-1 md:grid-cols-2">
                <!-- Bouncing Image Container -->
                <div id="mashup-container" class="relative h-96 bg-black overflow-hidden border-b md:border-b-0 md:border-r border-gray-700 cursor-crosshair">
                    <img 
                        id="bouncing-mashup" 
                        src="/images/mashup.png" 
                        alt="Mashup Trilogy" 
                        class="absolute w-32 h-32 rounded-full object-cover shadow-2xl border-2 border-[#D4AF37] z-10"
                        style="will-change: transform;"
                    >
                    <!-- Optional: Subtle grid background for the container -->
                    <div class="absolute inset-0 opacity-20" style="background-image: radial-gradient(#333 1px, transparent 1px); background-size: 20px 20px;"></div>
                </div>

                <!-- Album Bio -->
                <div class="p-8 flex flex-col justify-center">
                    <h3 class="text-2xl font-bold text-[#D4AF37] mb-2 font-serif">MASHUP TRILOGY</h3>
                    <p class="text-gray-400 mb-6 text-sm">Cavalcade of Disparity (CD) | New Game | The Last Testament</p>
                    
                    <div class="text-gray-300 leading-relaxed mb-6">
                        <!-- UPDATE BIO HERE -->
                        <p>
                           My mashup trilogy is something near and dear to my heart which is unfortunately yet unreleased. Although I am well aware our current justice system is a sick joke and a crapshoot, I have been in a state of occupation with other pursuits unwilling to release the tapestries of expression I created using a patchwork quilt of well over a hundred other artist's works, stitches of audio anywhere from 1 second to multiple minutes, to create a dynamic and original experience exploring the depths of my own psyche, and humanity at large. It is as of yet by our primitive justice infrastructure's position highly illegal except by defense of transformative use - which blatantly applies here. However I was mafia whacked both in criminal and civil court shortly after its' completion by judges who ignored all legal precedent to ensure I were the loser in multiple arbitrary cases I was attacked out of the blue with, making me realize the arduousness of the undertaking just to release such beauty to the world. I have not been in a position where I felt fit to fight the battle, so these albums are still yet to be released. 
                        </p>
                    </div>
                </div>
            </div>
        </div>

        <!-- SECTION 3: AI ALBUM (Single Image Link) -->
        <div class="glass-card rounded-xl overflow-hidden border border-gray-700">
            <div class="grid grid-cols-1 md:grid-cols-2">
                <!-- Text on Left -->
                <div class="p-8 flex flex-col justify-center order-2 md:order-1">
                    <h3 class="text-2xl font-bold text-[#D4AF37] mb-2 font-serif uppercase leading-tight">
                        Lyrics by human,<br>generations by AI,<br>curated by human
                    </h3>
                    <p class="text-gray-400 mb-6 text-sm mt-2">LATEST AI ALBUM</p>
                    
                    <div class="text-gray-300 leading-relaxed mb-6">
                         <!-- UPDATE BIO HERE -->
                        <p>
                          AI generative music enables anyone with an idea for audio to create beautiful soundscapes with minimal toil, maximizing the enjoyment and output of the art for the mentally active yet technically lazy. My latest album-in-progress is "Holocaustic rapture" embolizing the explosive conversion to enlightenment of large swaths of humanity at once.
                        </p>
                    </div>

                    <a href="https://www.youtube.com/playlist?list=PLtcPmGq9to5gLNaGPGIUT_VOkvPCA3UPA" target="_blank" class="inline-flex items-center gap-2 text-[#20B2AA] hover:text-white uppercase text-sm font-bold tracking-wider w-fit">
                        Listen on YouTube &rarr;
                    </a>
                </div>

                <!-- Playlist Image Link (Right) -->
                <a href="https://www.youtube.com/playlist?list=PLtcPmGq9to5gLNaGPGIUT_VOkvPCA3UPA" target="_blank" class="relative h-96 bg-black block group overflow-hidden order-1 md:order-2">
                    
                    <!-- Layer 1: Base Image -->
                    <div class="absolute inset-0 bg-cover bg-center transition-transform duration-700 ease-out group-hover:scale-105"
                         style="background-image: url('/images/sun.jpg');">
                    </div>

                    <!-- Layer 2: Middle "Falling" Layer -->
                    <div class="absolute inset-0 bg-cover bg-center opacity-0 transition-all duration-700 ease-out group-hover:opacity-50 group-hover:translate-y-4 group-hover:scale-95 mix-blend-overlay"
                         style="background-image: url('/images/sun.jpg');">
                    </div>

                    <!-- Layer 3: Top "Falling" Layer -->
                    <div class="absolute inset-0 bg-cover bg-center opacity-0 transition-all duration-700 ease-out delay-100 group-hover:opacity-30 group-hover:translate-y-8 group-hover:scale-90 mix-blend-overlay"
                         style="background-image: url('/images/sun.jpg');">
                    </div>
                    
                    <!-- Play Overlay & Button Animation -->
                    <div class="absolute inset-0 flex items-center justify-center">
                        <div class="relative flex items-center justify-center w-24 h-24">
                            <!-- Growing Layer 3 (Outer) -->
                            <div class="absolute inset-0 bg-white rounded-full opacity-0 transform scale-50 transition-all duration-500 ease-out group-hover:scale-150 group-hover:opacity-20"></div>
                            
                            <!-- Growing Layer 2 (Inner) -->
                            <div class="absolute inset-0 bg-white rounded-full opacity-0 transform scale-50 transition-all duration-500 ease-out delay-75 group-hover:scale-110 group-hover:opacity-60"></div>
                            
                            <!-- Main Icon -->
                            <i class="fab fa-youtube text-6xl text-white drop-shadow-xl transition-colors duration-300 relative z-10 group-hover:text-black"></i>
                        </div>
                    </div>
                </a>
            </div>
        </div>

    </div>
</section>

<!-- Script for Interactive Bouncing Image -->
<script>
    document.addEventListener('DOMContentLoaded', () => {
        const container = document.getElementById('mashup-container');
        const ball = document.getElementById('bouncing-mashup');

        if (container && ball) {
            let x = 0, y = 0;
            let vx = 1.5, vy = 1.5; // Velocity
            const friction = 0.94; // Slows down when not being pushed
            const repulsionStrength = 0.8; 
            const repulsionRadius = 150;
            const maxSpeed = 8;
            
            let isHovering = false;
            let mouseX = 0, mouseY = 0;

            // Start in the middle
            function initPosition() {
                const containerRect = container.getBoundingClientRect();
                const ballRect = ball.getBoundingClientRect();
                x = (containerRect.width - ballRect.width) / 2;
                y = (containerRect.height - ballRect.height) / 2;
            }

            // Mouse Interaction Listeners
            container.addEventListener('mouseenter', () => {
                isHovering = true;
                // "Stop bouncing" effect
                vx = 0; 
                vy = 0;
            });

            container.addEventListener('mousemove', (e) => {
                const rect = container.getBoundingClientRect();
                mouseX = e.clientX - rect.left;
                mouseY = e.clientY - rect.top;
            });

            container.addEventListener('mouseleave', () => {
                isHovering = false;
                // Resume bouncing in a random direction if stopped
                const angle = Math.random() * Math.PI * 2;
                vx = Math.cos(angle) * 1.5;
                vy = Math.sin(angle) * 1.5;
            });

            function animate() {
                const containerRect = container.getBoundingClientRect();
                const ballRect = ball.getBoundingClientRect();
                const ballW = ballRect.width;
                const ballH = ballRect.height;
                const maxW = containerRect.width - ballW;
                const maxH = containerRect.height - ballH;

                if (isHovering) {
                    // --- AVOIDANCE MODE ---
                    
                    // Apply Friction first
                    vx *= friction;
                    vy *= friction;

                    // Calculate center of ball
                    const cx = x + ballW / 2;
                    const cy = y + ballH / 2;

                    // Vector from mouse to ball center
                    const dx = cx - mouseX;
                    const dy = cy - mouseY;
                    const dist = Math.sqrt(dx*dx + dy*dy);

                    // If mouse is within range, push ball away
                    if (dist < repulsionRadius) {
                        const force = (repulsionRadius - dist) / repulsionRadius; // 0 to 1
                        const angle = Math.atan2(dy, dx);
                        
                        vx += Math.cos(angle) * force * repulsionStrength;
                        vy += Math.sin(angle) * force * repulsionStrength;
                    }

                    // Limit speed
                    const currentSpeed = Math.sqrt(vx*vx + vy*vy);
                    if (currentSpeed > maxSpeed) {
                        vx = (vx / currentSpeed) * maxSpeed;
                        vy = (vy / currentSpeed) * maxSpeed;
                    }

                    // Move
                    x += vx;
                    y += vy;

                    // Wall Collisions (Stop at wall)
                    if (x <= 0) { x = 0; vx = 0; }
                    if (x >= maxW) { x = maxW; vx = 0; }
                    if (y <= 0) { y = 0; vy = 0; }
                    if (y >= maxH) { y = maxH; vy = 0; }

                } else {
                    // --- BOUNCE MODE ---
                    x += vx;
                    y += vy;

                    // Bounce off walls
                    if (x <= 0) { x = 0; vx = -vx; }
                    if (x >= maxW) { x = maxW; vx = -vx; }
                    if (y <= 0) { y = 0; vy = -vy; }
                    if (y >= maxH) { y = maxH; vy = -vy; }

                    // Maintain Constant Speed (approx 2.1 units/frame total)
                    // If it slowed down too much during transition or float point errors
                    const speed = Math.sqrt(vx*vx + vy*vy);
                    const targetSpeed = 2.1; // roughly sqrt(1.5^2 + 1.5^2)
                    
                    if (speed < 0.1) {
                         // kickstart if dead stopped
                        vx = 1.5; vy = 1.5;
                    } else if (Math.abs(speed - targetSpeed) > 0.1) {
                        const scale = targetSpeed / speed;
                        vx *= scale;
                        vy *= scale;
                    }
                }

                ball.style.transform = `translate(${x}px, ${y}px)`;
                requestAnimationFrame(animate);
            }

            // Init
            if (ball.complete) {
                initPosition();
                animate();
            } else {
                ball.onload = () => {
                    initPosition();
                    animate();
                };
            }
            
            // Handle Resize
            window.addEventListener('resize', () => {
                const containerRect = container.getBoundingClientRect();
                const ballRect = ball.getBoundingClientRect();
                // Ensure ball stays in bounds after resize
                if (x > containerRect.width - ballRect.width) x = containerRect.width - ballRect.width;
                if (y > containerRect.height - ballRect.height) y = containerRect.height - ballRect.height;
            });
        }
    });
</script>

<%- include('partials/footer') %>